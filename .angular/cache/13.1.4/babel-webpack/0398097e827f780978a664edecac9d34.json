{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\david\\\\OneDrive\\\\Documentos\\\\GitHub\\\\finances\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/toast-service/toast.service\";\nimport * as i2 from \"src/app/http/requestService\";\nconst _c0 = [\"addDebitos\"];\nconst _c1 = [\"filtro\"];\nconst _c2 = [\"view\"];\nexport class DebitosComponent {\n  constructor(toast, http) {\n    this.toast = toast;\n    this.http = http;\n    this.loading = false;\n    this.listOfDays = [];\n    this.listaDebitos = [];\n    this.addDebito = {\n      descricao: '',\n      dia_pagamento: 1,\n      qtd_parcela: 1,\n      valor: 0\n    };\n    this.filtros = {\n      descricao: '',\n      status: ''\n    };\n    this.viewDebitos = {\n      id: 0,\n      descricao: '',\n      valor_p: 0,\n      qtd_p: 0,\n      atual_p: 0,\n      status: '',\n      valor_t: 0\n    };\n  }\n\n  ngOnInit() {\n    for (let i = 1; i <= 28; i++) {\n      this.listOfDays.push(i);\n    }\n\n    this.getListDebito();\n  }\n\n  getListDebito(data = {\n    status: 'A'\n  }) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        console.log(data);\n        _this.loading = true;\n        _this.listaDebitos = [];\n        let con = yield _this.http.getRequest('tesouraria/debitos/listaDebitos/' + JSON.stringify(data)).toPromise();\n        console.log(con);\n\n        if (con.status == 200) {\n          con.result.forEach(element => {\n            _this.listaDebitos.push({\n              atual_p: element.atual_parcela,\n              descricao: element.descricao,\n              id: element.id,\n              qtd_p: element.qtd_parcelas,\n              status: element.status,\n              valor_p: element.valor_p,\n              valor_t: element.valor_t\n            });\n          });\n        }\n\n        _this.loading = false;\n      } catch (error) {\n        console.log(error);\n        _this.loading = false;\n\n        _this.toast.addToast({\n          mensagem: 'Erro ao consutar',\n          tipo: 'E',\n          titulo: 'Erro'\n        });\n      }\n    })();\n  }\n\n  formatCurrency(val) {\n    return `R$ ${val.toLocaleString('pt-br', {\n      maximumFractionDigits: 2,\n      style: 'decimal'\n    })}`;\n  }\n\n  insereDebito() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      try {\n        let temp = {\n          descricao: _this2.addDebito.descricao,\n          valor_p: Math.round(_this2.addDebito.valor / _this2.addDebito.qtd_parcela * 100) / 100,\n          valor_t: _this2.addDebito.valor,\n          qtd_parcelas: _this2.addDebito.qtd_parcela,\n          dia_pg: _this2.addDebito.dia_pagamento\n        };\n        let con = yield _this2.http.postRequest('tesouraria/debitos/insert', temp).toPromise();\n\n        if (con.status == 200) {\n          _this2.addDebito = {\n            descricao: '',\n            dia_pagamento: 1,\n            qtd_parcela: 1,\n            valor: 0\n          };\n          (_a = _this2.modalAdicionar) === null || _a === void 0 ? void 0 : _a.hide();\n\n          _this2.toast.addToast({\n            mensagem: 'Débito adicionado com sucesso!',\n            tipo: 'S',\n            titulo: 'Sucesso'\n          });\n        }\n\n        _this2.getListDebito();\n      } catch (error) {\n        _this2.toast.addToast({\n          mensagem: 'Erro! Tente novamente mais tarde',\n          tipo: 'E',\n          titulo: 'Erro'\n        });\n      }\n    })();\n  }\n\n  calcResumo() {\n    let temp = Math.round(this.addDebito.valor / this.addDebito.qtd_parcela * 100) / 100;\n    return `${this.addDebito.qtd_parcela}x de R$ ${temp.toLocaleString('pt-br', {\n      style: 'decimal',\n      maximumFractionDigits: 2,\n      minimumFractionDigits: 2\n    })}`;\n  }\n\n  openModalAdicionar() {\n    var _a;\n\n    (_a = this.modalAdicionar) === null || _a === void 0 ? void 0 : _a.show();\n  }\n\n  formateStatus(val) {\n    switch (val) {\n      case 'A':\n        return \"Aberto\";\n\n      case 'F':\n        return \"Finalizado\";\n\n      default:\n        return \"ativo\";\n        break;\n    }\n  }\n\n  filtrar() {\n    var _a;\n\n    this.getListDebito({\n      status: this.filtros.status,\n      descricao: this.filtros.descricao\n    });\n    (_a = this.modalFiltro) === null || _a === void 0 ? void 0 : _a.hide();\n  }\n\n  openModalFiltro() {\n    var _a;\n\n    this.filtros = {\n      descricao: '',\n      status: 'A'\n    };\n    (_a = this.modalFiltro) === null || _a === void 0 ? void 0 : _a.show();\n  }\n\n  openModalDetalhes(id) {\n    var _a;\n\n    console.log(id);\n    console.log(this.listaDebitos);\n    let temp = this.listaDebitos.filter(e => e.id == id);\n    console.log(temp);\n    this.viewDebitos = {\n      atual_p: temp[0].atual_p,\n      descricao: temp[0].descricao,\n      id: temp[0].id,\n      qtd_p: temp[0].qtd_p,\n      status: temp[0].status,\n      valor_p: temp[0].valor_p,\n      valor_t: temp[0].valor_t\n    };\n    console.log(this.viewDebitos);\n    (_a = this.modalDetalhes) === null || _a === void 0 ? void 0 : _a.show();\n  }\n\n}\n\nDebitosComponent.ɵfac = function DebitosComponent_Factory(t) {\n  return new (t || DebitosComponent)(i0.ɵɵdirectiveInject(i1.ToastService), i0.ɵɵdirectiveInject(i2.RequestService));\n};\n\nDebitosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DebitosComponent,\n  selectors: [[\"app-debitos\"]],\n  viewQuery: function DebitosComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(_c2, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalAdicionar = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalFiltro = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalDetalhes = _t.first);\n    }\n  },\n  decls: 2,\n  vars: 0,\n  template: function DebitosComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"debitos works!\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\".actions[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    display: flex;\\r\\n    justify-content: end;\\r\\n}\\r\\n\\r\\n.valor-vazio[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n}\\r\\n\\r\\n.res[_ngcontent-%COMP%] {\\r\\n    font-weight: 600;\\r\\n}\\r\\n\\r\\n.form-row[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    justify-content: space-between;\\r\\n    flex-wrap: wrap;\\r\\n}\\r\\n\\r\\n.card-title[_ngcontent-%COMP%] {\\r\\n    font-size: 18px;\\r\\n    font-weight: 500;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlYml0b3MuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFdBQVc7SUFDWCxhQUFhO0lBQ2Isb0JBQW9CO0FBQ3hCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLFdBQVc7SUFDWCxZQUFZO0lBQ1osdUJBQXVCO0lBQ3ZCLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLGFBQWE7SUFDYiw4QkFBOEI7SUFDOUIsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLGVBQWU7SUFDZixnQkFBZ0I7QUFDcEIiLCJmaWxlIjoiZGViaXRvcy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmFjdGlvbnMge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBlbmQ7XHJcbn1cclxuXHJcbi52YWxvci12YXppbyB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5yZXMge1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxufVxyXG5cclxuLmZvcm0tcm93IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICBmbGV4LXdyYXA6IHdyYXA7XHJcbn1cclxuXHJcbi5jYXJkLXRpdGxlIHtcclxuICAgIGZvbnQtc2l6ZTogMThweDtcclxuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["C:/Users/david/OneDrive/Documentos/GitHub/finances/src/app/debitos/debitos.component.ts"],"names":["i0","i1","i2","_c0","_c1","_c2","DebitosComponent","constructor","toast","http","loading","listOfDays","listaDebitos","addDebito","descricao","dia_pagamento","qtd_parcela","valor","filtros","status","viewDebitos","id","valor_p","qtd_p","atual_p","valor_t","ngOnInit","i","push","getListDebito","data","console","log","con","getRequest","JSON","stringify","toPromise","result","forEach","element","atual_parcela","qtd_parcelas","error","addToast","mensagem","tipo","titulo","formatCurrency","val","toLocaleString","maximumFractionDigits","style","insereDebito","_a","temp","Math","round","dia_pg","postRequest","modalAdicionar","hide","calcResumo","minimumFractionDigits","openModalAdicionar","show","formateStatus","filtrar","modalFiltro","openModalFiltro","openModalDetalhes","filter","e","modalDetalhes","ɵfac","DebitosComponent_Factory","t","ɵɵdirectiveInject","ToastService","RequestService","ɵcmp","ɵɵdefineComponent","type","selectors","viewQuery","DebitosComponent_Query","rf","ctx","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","decls","vars","template","DebitosComponent_Template","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/toast-service/toast.service\";\r\nimport * as i2 from \"src/app/http/requestService\";\r\nconst _c0 = [\"addDebitos\"];\r\nconst _c1 = [\"filtro\"];\r\nconst _c2 = [\"view\"];\r\nexport class DebitosComponent {\r\n    constructor(toast, http) {\r\n        this.toast = toast;\r\n        this.http = http;\r\n        this.loading = false;\r\n        this.listOfDays = [];\r\n        this.listaDebitos = [];\r\n        this.addDebito = {\r\n            descricao: '',\r\n            dia_pagamento: 1,\r\n            qtd_parcela: 1,\r\n            valor: 0,\r\n        };\r\n        this.filtros = {\r\n            descricao: '',\r\n            status: ''\r\n        };\r\n        this.viewDebitos = {\r\n            id: 0,\r\n            descricao: '',\r\n            valor_p: 0,\r\n            qtd_p: 0,\r\n            atual_p: 0,\r\n            status: '',\r\n            valor_t: 0\r\n        };\r\n    }\r\n    ngOnInit() {\r\n        for (let i = 1; i <= 28; i++) {\r\n            this.listOfDays.push(i);\r\n        }\r\n        this.getListDebito();\r\n    }\r\n    async getListDebito(data = { status: 'A' }) {\r\n        try {\r\n            console.log(data);\r\n            this.loading = true;\r\n            this.listaDebitos = [];\r\n            let con = await this.http.getRequest('tesouraria/debitos/listaDebitos/' + JSON.stringify(data)).toPromise();\r\n            console.log(con);\r\n            if (con.status == 200) {\r\n                con.result.forEach((element) => {\r\n                    this.listaDebitos.push({\r\n                        atual_p: element.atual_parcela,\r\n                        descricao: element.descricao,\r\n                        id: element.id,\r\n                        qtd_p: element.qtd_parcelas,\r\n                        status: element.status,\r\n                        valor_p: element.valor_p,\r\n                        valor_t: element.valor_t,\r\n                    });\r\n                });\r\n            }\r\n            this.loading = false;\r\n        }\r\n        catch (error) {\r\n            console.log(error);\r\n            this.loading = false;\r\n            this.toast.addToast({\r\n                mensagem: 'Erro ao consutar',\r\n                tipo: 'E',\r\n                titulo: 'Erro'\r\n            });\r\n        }\r\n    }\r\n    formatCurrency(val) {\r\n        return `R$ ${val.toLocaleString('pt-br', { maximumFractionDigits: 2, style: 'decimal' })}`;\r\n    }\r\n    async insereDebito() {\r\n        var _a;\r\n        try {\r\n            let temp = {\r\n                descricao: this.addDebito.descricao,\r\n                valor_p: Math.round((this.addDebito.valor / this.addDebito.qtd_parcela) * 100) / 100,\r\n                valor_t: this.addDebito.valor,\r\n                qtd_parcelas: this.addDebito.qtd_parcela,\r\n                dia_pg: this.addDebito.dia_pagamento\r\n            };\r\n            let con = await this.http.postRequest('tesouraria/debitos/insert', temp).toPromise();\r\n            if (con.status == 200) {\r\n                this.addDebito = {\r\n                    descricao: '',\r\n                    dia_pagamento: 1,\r\n                    qtd_parcela: 1,\r\n                    valor: 0\r\n                };\r\n                (_a = this.modalAdicionar) === null || _a === void 0 ? void 0 : _a.hide();\r\n                this.toast.addToast({\r\n                    mensagem: 'Débito adicionado com sucesso!',\r\n                    tipo: 'S',\r\n                    titulo: 'Sucesso'\r\n                });\r\n            }\r\n            this.getListDebito();\r\n        }\r\n        catch (error) {\r\n            this.toast.addToast({\r\n                mensagem: 'Erro! Tente novamente mais tarde',\r\n                tipo: 'E',\r\n                titulo: 'Erro'\r\n            });\r\n        }\r\n    }\r\n    calcResumo() {\r\n        let temp = Math.round((this.addDebito.valor / this.addDebito.qtd_parcela) * 100) / 100;\r\n        return `${this.addDebito.qtd_parcela}x de R$ ${temp.toLocaleString('pt-br', { style: 'decimal', maximumFractionDigits: 2, minimumFractionDigits: 2 })}`;\r\n    }\r\n    openModalAdicionar() {\r\n        var _a;\r\n        (_a = this.modalAdicionar) === null || _a === void 0 ? void 0 : _a.show();\r\n    }\r\n    formateStatus(val) {\r\n        switch (val) {\r\n            case 'A':\r\n                return \"Aberto\";\r\n            case 'F':\r\n                return \"Finalizado\";\r\n            default:\r\n                return \"ativo\";\r\n                break;\r\n        }\r\n    }\r\n    filtrar() {\r\n        var _a;\r\n        this.getListDebito({ status: this.filtros.status, descricao: this.filtros.descricao });\r\n        (_a = this.modalFiltro) === null || _a === void 0 ? void 0 : _a.hide();\r\n    }\r\n    openModalFiltro() {\r\n        var _a;\r\n        this.filtros = {\r\n            descricao: '',\r\n            status: 'A'\r\n        };\r\n        (_a = this.modalFiltro) === null || _a === void 0 ? void 0 : _a.show();\r\n    }\r\n    openModalDetalhes(id) {\r\n        var _a;\r\n        console.log(id);\r\n        console.log(this.listaDebitos);\r\n        let temp = this.listaDebitos.filter(e => e.id == id);\r\n        console.log(temp);\r\n        this.viewDebitos = {\r\n            atual_p: temp[0].atual_p,\r\n            descricao: temp[0].descricao,\r\n            id: temp[0].id,\r\n            qtd_p: temp[0].qtd_p,\r\n            status: temp[0].status,\r\n            valor_p: temp[0].valor_p,\r\n            valor_t: temp[0].valor_t\r\n        };\r\n        console.log(this.viewDebitos);\r\n        (_a = this.modalDetalhes) === null || _a === void 0 ? void 0 : _a.show();\r\n    }\r\n}\r\nDebitosComponent.ɵfac = function DebitosComponent_Factory(t) { return new (t || DebitosComponent)(i0.ɵɵdirectiveInject(i1.ToastService), i0.ɵɵdirectiveInject(i2.RequestService)); };\r\nDebitosComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: DebitosComponent, selectors: [[\"app-debitos\"]], viewQuery: function DebitosComponent_Query(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵviewQuery(_c0, 5);\r\n        i0.ɵɵviewQuery(_c1, 5);\r\n        i0.ɵɵviewQuery(_c2, 5);\r\n    } if (rf & 2) {\r\n        let _t;\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalAdicionar = _t.first);\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalFiltro = _t.first);\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalDetalhes = _t.first);\r\n    } }, decls: 2, vars: 0, template: function DebitosComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"p\");\r\n        i0.ɵɵtext(1, \"debitos works!\");\r\n        i0.ɵɵelementEnd();\r\n    } }, styles: [\".actions[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    display: flex;\\r\\n    justify-content: end;\\r\\n}\\r\\n\\r\\n.valor-vazio[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n}\\r\\n\\r\\n.res[_ngcontent-%COMP%] {\\r\\n    font-weight: 600;\\r\\n}\\r\\n\\r\\n.form-row[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    justify-content: space-between;\\r\\n    flex-wrap: wrap;\\r\\n}\\r\\n\\r\\n.card-title[_ngcontent-%COMP%] {\\r\\n    font-size: 18px;\\r\\n    font-weight: 500;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlYml0b3MuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFdBQVc7SUFDWCxhQUFhO0lBQ2Isb0JBQW9CO0FBQ3hCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLFdBQVc7SUFDWCxZQUFZO0lBQ1osdUJBQXVCO0lBQ3ZCLG1CQUFtQjtBQUN2Qjs7QUFFQTtJQUNJLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLGFBQWE7SUFDYiw4QkFBOEI7SUFDOUIsZUFBZTtBQUNuQjs7QUFFQTtJQUNJLGVBQWU7SUFDZixnQkFBZ0I7QUFDcEIiLCJmaWxlIjoiZGViaXRvcy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmFjdGlvbnMge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBlbmQ7XHJcbn1cclxuXHJcbi52YWxvci12YXppbyB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5yZXMge1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxufVxyXG5cclxuLmZvcm0tcm93IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICBmbGV4LXdyYXA6IHdyYXA7XHJcbn1cclxuXHJcbi5jYXJkLXRpdGxlIHtcclxuICAgIGZvbnQtc2l6ZTogMThweDtcclxuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbn0iXX0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}