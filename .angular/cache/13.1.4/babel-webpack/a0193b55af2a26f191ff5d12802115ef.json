{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\david\\\\OneDrive\\\\Documentos\\\\GitHub\\\\finances\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/toast-service/toast.service\";\nimport * as i2 from \"src/app/http/requestService\";\nimport * as i3 from \"src/app/util.service/format.service\";\nconst _c0 = [\"filtro\"];\nconst _c1 = [\"view\"];\nconst _c2 = [\"cadastro\"];\nexport class TransacoesComponent {\n  constructor(toast, http, form) {\n    this.toast = toast;\n    this.http = http;\n    this.form = form;\n    this.disabledInput = false;\n    this.loading = false;\n    this.listTransacoes = [];\n    this.listaDebitos = [];\n    this.listMembros = [];\n    this.filtros = {\n      data_inicial: new Date(),\n      data_final: new Date(),\n      pesquisa: '',\n      tipo: ''\n    };\n    this.newTransacao = {\n      descricao: '',\n      tag: 'dizimos',\n      tipo: 'E',\n      valor: '',\n      exibir_membros: true,\n      desabilitar: false,\n      desabilitar_valor: false,\n      exibir_debitos: false,\n      obs: ''\n    };\n    this.detalheTransacao = {\n      data: new Date(),\n      id: 0,\n      obs: '',\n      valor: 0,\n      tag: '',\n      tipo: '',\n      causa: ''\n    };\n  }\n\n  changeTag(e) {\n    if (e.target.value == 'dizimos') {\n      this.newTransacao.exibir_membros = true;\n      this.newTransacao.desabilitar = false;\n    } else if (e.target.value == 'ofertas') {\n      this.newTransacao.exibir_membros = false;\n      this.newTransacao.desabilitar = true;\n    } else if (e.target.value == 'doacao') {\n      this.newTransacao.exibir_membros = false;\n      this.newTransacao.desabilitar = false;\n    }\n\n    this.newTransacao.descricao = '';\n  }\n\n  showListDebitos() {\n    this.newTransacao.descricao = '';\n    this.newTransacao.valor = '';\n    this.newTransacao.desabilitar_valor = !this.newTransacao.desabilitar_valor;\n  }\n\n  changeTipo(val) {\n    this.newTransacao.descricao = '';\n    this.newTransacao.tipo = val;\n\n    if (val == 'S') {\n      this.newTransacao.tag = 'saida';\n    } else {\n      this.newTransacao.tag = 'dizimos';\n    }\n  }\n\n  changeDebitos(e) {\n    let temp = this.listaDebitos.filter(debito => debito.id == e.target.value);\n    this.newTransacao.valor = temp[0].valor.toLocaleString('pt-br', {\n      maximumFractionDigits: 2\n    });\n  }\n\n  ngOnInit() {\n    let today = new Date();\n    this.filtros.data_inicial = new Date(today.getFullYear(), today.getMonth(), 1), this.filtros.data_final = new Date(today.getFullYear(), today.getMonth() + 1, 0), this.getListaTransacao();\n    this.getDebitos();\n    this.getUsuarios();\n  }\n\n  getDebitos() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.listaDebitos = [];\n\n      try {\n        let con = yield _this.http.getRequest('tesouraria/debitos/listaDebitos/' + JSON.stringify({\n          status: 'A'\n        })).toPromise();\n\n        if (con.status == 200) {\n          con.result.forEach(e => {\n            _this.listaDebitos.push({\n              id: e.id,\n              descricao: e.descricao,\n              atual_p: e.atual_parcela,\n              qtd_p: e.qtd_parcelas,\n              valor: e.valor_p\n            });\n          });\n        } else if (con.status == 204) {\n          _this.listaDebitos = [{\n            id: 0,\n            descricao: 'Sem débitos',\n            valor: 0.0,\n            atual_p: 0,\n            qtd_p: 0\n          }];\n        }\n      } catch (error) {\n        _this.listaDebitos = [{\n          id: 0,\n          descricao: 'Sem débitos',\n          valor: 0.0,\n          atual_p: 0,\n          qtd_p: 0\n        }];\n\n        _this.toast.addToast({\n          mensagem: 'Erro ao consultar Debitos!',\n          tipo: 'E',\n          titulo: 'Erro'\n        });\n      }\n    })();\n  }\n\n  getUsuarios() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.listMembros = [];\n\n      try {\n        let con = yield _this2.http.getRequest('tesouraria/membros/consulta').toPromise();\n\n        if (con.status == 200) {\n          con.result.forEach(e => {\n            _this2.listMembros.push({\n              id: e.id,\n              nome: e.nome\n            });\n          });\n        }\n      } catch (error) {\n        _this2.toast.addToast({\n          mensagem: 'Erro ao consultar usuarios!',\n          tipo: 'E',\n          titulo: 'Erro'\n        });\n      }\n    })();\n  }\n\n  getListaTransacao() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        _this3.loading = true;\n        let con = yield _this3.http.postRequest('tesouraria/transacao/listar', _this3.filtros).toPromise();\n        _this3.listTransacoes = [];\n\n        if (con.status == 200) {\n          for (let i = 0; i < con.result.length; i++) {\n            const element = con.result[i];\n\n            _this3.listTransacoes.push(element);\n          }\n        }\n\n        _this3.loading = false;\n      } catch (error) {\n        _this3.loading = false;\n\n        _this3.toast.addToast({\n          mensagem: 'Erro ao consultar transações!',\n          tipo: 'E',\n          titulo: 'Erro'\n        });\n      }\n    })();\n  }\n\n  filtrar() {\n    var _a;\n\n    this.getListaTransacao();\n    (_a = this.modalFiltro) === null || _a === void 0 ? void 0 : _a.hide();\n  }\n\n  formatData(val) {\n    return this.form.data(val);\n  }\n\n  formatValores(val, tipo) {\n    let temp = '+';\n\n    if (tipo == 'S') {\n      temp = '-';\n    }\n\n    return temp + this.form.moeda(val);\n  }\n\n  formatTipo(val) {\n    if (val == 'E') {\n      return 'Entrada';\n    } else {\n      return 'Saída';\n    }\n  }\n\n  openModalCadastro() {\n    var _a;\n\n    (_a = this.modalCadastro) === null || _a === void 0 ? void 0 : _a.show();\n  }\n\n  openModalEdit(id) {}\n\n  openModalFiltro() {\n    var _a;\n\n    (_a = this.modalFiltro) === null || _a === void 0 ? void 0 : _a.show();\n  }\n\n  salvar() {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      try {\n        _this4.disabledInput = true;\n        _this4.loading = true;\n        let temp = {\n          tipo: _this4.newTransacao.tipo,\n          obs: _this4.newTransacao.obs,\n          valor: _this4.newTransacao.valor,\n          tag: _this4.newTransacao.tag,\n          causa: _this4.newTransacao.descricao,\n          id_debito: ''\n        };\n\n        if (_this4.newTransacao.exibir_debitos && _this4.newTransacao.tipo == 'S') {\n          let aux1 = temp.causa;\n\n          let aux = _this4.listaDebitos.filter(e => e.id.toString() == temp.causa);\n\n          temp.causa = `${aux[0].descricao} - ${aux[0].atual_p}/${aux[0].qtd_p}`;\n          temp.id_debito = aux1;\n        } else {\n          temp.id_debito = 'null';\n        }\n\n        let con = yield _this4.http.postRequest('tesouraria/transacao/insert', temp).toPromise();\n\n        if (con.status == 200) {\n          (_a = _this4.modalCadastro) === null || _a === void 0 ? void 0 : _a.hide();\n\n          if (_this4.newTransacao.exibir_debitos) {\n            _this4.getDebitos();\n          }\n\n          _this4.newTransacao.valor = '';\n\n          _this4.getListaTransacao();\n\n          _this4.toast.addToast({\n            mensagem: 'Salvo com sucesso!',\n            tipo: 'S',\n            titulo: 'Sucesso'\n          });\n        }\n\n        _this4.disabledInput = false;\n      } catch (error) {\n        _this4.toast.addToast({\n          mensagem: 'Erro ao inserir! Tente novamente mais tarde',\n          tipo: 'E',\n          titulo: 'Erro:'\n        });\n\n        _this4.disabledInput = false;\n      }\n    })();\n  }\n\n  openModalDetalhes(id) {\n    var _a;\n\n    let temp = this.listTransacoes.filter(e => e.id == id);\n    this.detalheTransacao = temp[0];\n    (_a = this.modalDetalhes) === null || _a === void 0 ? void 0 : _a.show();\n  }\n\n}\n\nTransacoesComponent.ɵfac = function TransacoesComponent_Factory(t) {\n  return new (t || TransacoesComponent)(i0.ɵɵdirectiveInject(i1.ToastService), i0.ɵɵdirectiveInject(i2.RequestService), i0.ɵɵdirectiveInject(i3.Formate));\n};\n\nTransacoesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TransacoesComponent,\n  selectors: [[\"app-transacoes\"]],\n  viewQuery: function TransacoesComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(_c2, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalFiltro = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalDetalhes = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalCadastro = _t.first);\n    }\n  },\n  decls: 2,\n  vars: 0,\n  template: function TransacoesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"transacoes works!\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\".valor-vazio[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n}\\r\\n\\r\\n.actions[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    width: 100%;\\r\\n    justify-content: end;\\r\\n    align-items: center;\\r\\n\\r\\n}\\r\\n\\r\\nfieldset[_ngcontent-%COMP%] {\\r\\n    padding-top: 10px;\\r\\n}\\r\\n\\r\\n.card-title[_ngcontent-%COMP%] {\\r\\n    font-size: 18px;\\r\\n    font-weight: 500;\\r\\n}\\r\\n\\r\\n.tabset[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    width: 100%;\\r\\n    justify-content: space-evenly;\\r\\n    border-bottom: solid 1px var(--principal);\\r\\n}\\r\\n\\r\\n.tab[_ngcontent-%COMP%] {\\r\\n    text-align: center;\\r\\n    width: 100%;\\r\\n    border-top-left-radius: 5px;\\r\\n    height: 30px;\\r\\n    font-size: 16px;\\r\\n    border-top-right-radius: 5px;\\r\\n    color: var(--dark);\\r\\n    border: solid 1px 1px 0 1px var(--principal);\\r\\n    background-color: #ececec88;\\r\\n}\\r\\n\\r\\n.tab[_ngcontent-%COMP%]:hover {\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n.selected-tab[_ngcontent-%COMP%] {\\r\\n    background-color: var(--principal);\\r\\n    color: white;\\r\\n}\\r\\n\\r\\n.res[_ngcontent-%COMP%] {\\r\\n    font-weight: 600;\\r\\n}\\r\\n\\r\\n.form-row[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    justify-content: space-between;\\r\\n    flex-wrap: wrap;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYW5zYWNvZXMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYixXQUFXO0lBQ1gsWUFBWTtJQUNaLHVCQUF1QjtJQUN2QixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsV0FBVztJQUNYLG9CQUFvQjtJQUNwQixtQkFBbUI7O0FBRXZCOztBQUVBO0lBQ0ksaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksZUFBZTtJQUNmLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLGFBQWE7SUFDYixXQUFXO0lBQ1gsNkJBQTZCO0lBQzdCLHlDQUF5QztBQUM3Qzs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixXQUFXO0lBQ1gsMkJBQTJCO0lBQzNCLFlBQVk7SUFDWixlQUFlO0lBQ2YsNEJBQTRCO0lBQzVCLGtCQUFrQjtJQUNsQiw0Q0FBNEM7SUFDNUMsMkJBQTJCO0FBQy9COztBQUVBO0lBQ0ksZUFBZTtBQUNuQjs7QUFFQTtJQUNJLGtDQUFrQztJQUNsQyxZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksZ0JBQWdCO0FBQ3BCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLDhCQUE4QjtJQUM5QixlQUFlO0FBQ25CIiwiZmlsZSI6InRyYW5zYWNvZXMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi52YWxvci12YXppbyB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5hY3Rpb25zIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGp1c3RpZnktY29udGVudDogZW5kO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHJcbn1cclxuXHJcbmZpZWxkc2V0IHtcclxuICAgIHBhZGRpbmctdG9wOiAxMHB4O1xyXG59XHJcblxyXG4uY2FyZC10aXRsZSB7XHJcbiAgICBmb250LXNpemU6IDE4cHg7XHJcbiAgICBmb250LXdlaWdodDogNTAwO1xyXG59XHJcblxyXG4udGFic2V0IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtZXZlbmx5O1xyXG4gICAgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4IHZhcigtLXByaW5jaXBhbCk7XHJcbn1cclxuXHJcbi50YWIge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA1cHg7XHJcbiAgICBoZWlnaHQ6IDMwcHg7XHJcbiAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNXB4O1xyXG4gICAgY29sb3I6IHZhcigtLWRhcmspO1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggMXB4IDAgMXB4IHZhcigtLXByaW5jaXBhbCk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWNlY2VjODg7XHJcbn1cclxuXHJcbi50YWI6aG92ZXIge1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4uc2VsZWN0ZWQtdGFiIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW5jaXBhbCk7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbn1cclxuXHJcbi5yZXMge1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxufVxyXG5cclxuLmZvcm0tcm93IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICBmbGV4LXdyYXA6IHdyYXA7XHJcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["C:/Users/david/OneDrive/Documentos/GitHub/finances/src/app/transacoes/transacoes.component.ts"],"names":["i0","i1","i2","i3","_c0","_c1","_c2","TransacoesComponent","constructor","toast","http","form","disabledInput","loading","listTransacoes","listaDebitos","listMembros","filtros","data_inicial","Date","data_final","pesquisa","tipo","newTransacao","descricao","tag","valor","exibir_membros","desabilitar","desabilitar_valor","exibir_debitos","obs","detalheTransacao","data","id","causa","changeTag","e","target","value","showListDebitos","changeTipo","val","changeDebitos","temp","filter","debito","toLocaleString","maximumFractionDigits","ngOnInit","today","getFullYear","getMonth","getListaTransacao","getDebitos","getUsuarios","con","getRequest","JSON","stringify","status","toPromise","result","forEach","push","atual_p","atual_parcela","qtd_p","qtd_parcelas","valor_p","error","addToast","mensagem","titulo","nome","postRequest","i","length","element","filtrar","_a","modalFiltro","hide","formatData","formatValores","moeda","formatTipo","openModalCadastro","modalCadastro","show","openModalEdit","openModalFiltro","salvar","id_debito","aux1","aux","toString","openModalDetalhes","modalDetalhes","ɵfac","TransacoesComponent_Factory","t","ɵɵdirectiveInject","ToastService","RequestService","Formate","ɵcmp","ɵɵdefineComponent","type","selectors","viewQuery","TransacoesComponent_Query","rf","ctx","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","first","decls","vars","template","TransacoesComponent_Template","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/toast-service/toast.service\";\r\nimport * as i2 from \"src/app/http/requestService\";\r\nimport * as i3 from \"src/app/util.service/format.service\";\r\nconst _c0 = [\"filtro\"];\r\nconst _c1 = [\"view\"];\r\nconst _c2 = [\"cadastro\"];\r\nexport class TransacoesComponent {\r\n    constructor(toast, http, form) {\r\n        this.toast = toast;\r\n        this.http = http;\r\n        this.form = form;\r\n        this.disabledInput = false;\r\n        this.loading = false;\r\n        this.listTransacoes = [];\r\n        this.listaDebitos = [];\r\n        this.listMembros = [];\r\n        this.filtros = {\r\n            data_inicial: new Date(),\r\n            data_final: new Date(),\r\n            pesquisa: '',\r\n            tipo: ''\r\n        };\r\n        this.newTransacao = {\r\n            descricao: '',\r\n            tag: 'dizimos',\r\n            tipo: 'E',\r\n            valor: '',\r\n            exibir_membros: true,\r\n            desabilitar: false,\r\n            desabilitar_valor: false,\r\n            exibir_debitos: false,\r\n            obs: ''\r\n        };\r\n        this.detalheTransacao = {\r\n            data: new Date(),\r\n            id: 0,\r\n            obs: '',\r\n            valor: 0,\r\n            tag: '',\r\n            tipo: '',\r\n            causa: ''\r\n        };\r\n    }\r\n    changeTag(e) {\r\n        if (e.target.value == 'dizimos') {\r\n            this.newTransacao.exibir_membros = true;\r\n            this.newTransacao.desabilitar = false;\r\n        }\r\n        else if (e.target.value == 'ofertas') {\r\n            this.newTransacao.exibir_membros = false;\r\n            this.newTransacao.desabilitar = true;\r\n        }\r\n        else if (e.target.value == 'doacao') {\r\n            this.newTransacao.exibir_membros = false;\r\n            this.newTransacao.desabilitar = false;\r\n        }\r\n        this.newTransacao.descricao = '';\r\n    }\r\n    showListDebitos() {\r\n        this.newTransacao.descricao = '';\r\n        this.newTransacao.valor = '';\r\n        this.newTransacao.desabilitar_valor = !this.newTransacao.desabilitar_valor;\r\n    }\r\n    changeTipo(val) {\r\n        this.newTransacao.descricao = '';\r\n        this.newTransacao.tipo = val;\r\n        if (val == 'S') {\r\n            this.newTransacao.tag = 'saida';\r\n        }\r\n        else {\r\n            this.newTransacao.tag = 'dizimos';\r\n        }\r\n    }\r\n    changeDebitos(e) {\r\n        let temp = this.listaDebitos.filter(debito => debito.id == e.target.value);\r\n        this.newTransacao.valor = temp[0].valor.toLocaleString('pt-br', { maximumFractionDigits: 2 });\r\n    }\r\n    ngOnInit() {\r\n        let today = new Date();\r\n        this.filtros.data_inicial = new Date(today.getFullYear(), today.getMonth(), 1),\r\n            this.filtros.data_final = new Date(today.getFullYear(), today.getMonth() + 1, 0),\r\n            this.getListaTransacao();\r\n        this.getDebitos();\r\n        this.getUsuarios();\r\n    }\r\n    async getDebitos() {\r\n        this.listaDebitos = [];\r\n        try {\r\n            let con = await this.http.getRequest('tesouraria/debitos/listaDebitos/' + JSON.stringify({ status: 'A' })).toPromise();\r\n            if (con.status == 200) {\r\n                con.result.forEach((e) => {\r\n                    this.listaDebitos.push({\r\n                        id: e.id,\r\n                        descricao: e.descricao,\r\n                        atual_p: e.atual_parcela,\r\n                        qtd_p: e.qtd_parcelas,\r\n                        valor: e.valor_p\r\n                    });\r\n                });\r\n            }\r\n            else if (con.status == 204) {\r\n                this.listaDebitos = [{ id: 0, descricao: 'Sem débitos', valor: 0.0, atual_p: 0, qtd_p: 0 }];\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.listaDebitos = [{ id: 0, descricao: 'Sem débitos', valor: 0.0, atual_p: 0, qtd_p: 0 }];\r\n            this.toast.addToast({\r\n                mensagem: 'Erro ao consultar Debitos!',\r\n                tipo: 'E',\r\n                titulo: 'Erro'\r\n            });\r\n        }\r\n    }\r\n    async getUsuarios() {\r\n        this.listMembros = [];\r\n        try {\r\n            let con = await this.http.getRequest('tesouraria/membros/consulta').toPromise();\r\n            if (con.status == 200) {\r\n                con.result.forEach((e) => {\r\n                    this.listMembros.push({\r\n                        id: e.id,\r\n                        nome: e.nome\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.toast.addToast({\r\n                mensagem: 'Erro ao consultar usuarios!',\r\n                tipo: 'E',\r\n                titulo: 'Erro'\r\n            });\r\n        }\r\n    }\r\n    async getListaTransacao() {\r\n        try {\r\n            this.loading = true;\r\n            let con = await this.http.postRequest('tesouraria/transacao/listar', this.filtros).toPromise();\r\n            this.listTransacoes = [];\r\n            if (con.status == 200) {\r\n                for (let i = 0; i < con.result.length; i++) {\r\n                    const element = con.result[i];\r\n                    this.listTransacoes.push(element);\r\n                }\r\n            }\r\n            this.loading = false;\r\n        }\r\n        catch (error) {\r\n            this.loading = false;\r\n            this.toast.addToast({\r\n                mensagem: 'Erro ao consultar transações!',\r\n                tipo: 'E',\r\n                titulo: 'Erro'\r\n            });\r\n        }\r\n    }\r\n    filtrar() {\r\n        var _a;\r\n        this.getListaTransacao();\r\n        (_a = this.modalFiltro) === null || _a === void 0 ? void 0 : _a.hide();\r\n    }\r\n    formatData(val) {\r\n        return this.form.data(val);\r\n    }\r\n    formatValores(val, tipo) {\r\n        let temp = '+';\r\n        if (tipo == 'S') {\r\n            temp = '-';\r\n        }\r\n        return temp + this.form.moeda(val);\r\n    }\r\n    formatTipo(val) {\r\n        if (val == 'E') {\r\n            return 'Entrada';\r\n        }\r\n        else {\r\n            return 'Saída';\r\n        }\r\n    }\r\n    openModalCadastro() {\r\n        var _a;\r\n        (_a = this.modalCadastro) === null || _a === void 0 ? void 0 : _a.show();\r\n    }\r\n    openModalEdit(id) {\r\n    }\r\n    openModalFiltro() {\r\n        var _a;\r\n        (_a = this.modalFiltro) === null || _a === void 0 ? void 0 : _a.show();\r\n    }\r\n    async salvar() {\r\n        var _a;\r\n        try {\r\n            this.disabledInput = true;\r\n            this.loading = true;\r\n            let temp = {\r\n                tipo: this.newTransacao.tipo,\r\n                obs: this.newTransacao.obs,\r\n                valor: this.newTransacao.valor,\r\n                tag: this.newTransacao.tag,\r\n                causa: this.newTransacao.descricao,\r\n                id_debito: ''\r\n            };\r\n            if (this.newTransacao.exibir_debitos && this.newTransacao.tipo == 'S') {\r\n                let aux1 = temp.causa;\r\n                let aux = this.listaDebitos.filter(e => e.id.toString() == temp.causa);\r\n                temp.causa = `${aux[0].descricao} - ${aux[0].atual_p}/${aux[0].qtd_p}`;\r\n                temp.id_debito = aux1;\r\n            }\r\n            else {\r\n                temp.id_debito = 'null';\r\n            }\r\n            let con = await this.http.postRequest('tesouraria/transacao/insert', temp).toPromise();\r\n            if (con.status == 200) {\r\n                (_a = this.modalCadastro) === null || _a === void 0 ? void 0 : _a.hide();\r\n                if (this.newTransacao.exibir_debitos) {\r\n                    this.getDebitos();\r\n                }\r\n                this.newTransacao.valor = '';\r\n                this.getListaTransacao();\r\n                this.toast.addToast({\r\n                    mensagem: 'Salvo com sucesso!',\r\n                    tipo: 'S',\r\n                    titulo: 'Sucesso'\r\n                });\r\n            }\r\n            this.disabledInput = false;\r\n        }\r\n        catch (error) {\r\n            this.toast.addToast({\r\n                mensagem: 'Erro ao inserir! Tente novamente mais tarde',\r\n                tipo: 'E',\r\n                titulo: 'Erro:'\r\n            });\r\n            this.disabledInput = false;\r\n        }\r\n    }\r\n    openModalDetalhes(id) {\r\n        var _a;\r\n        let temp = this.listTransacoes.filter(e => e.id == id);\r\n        this.detalheTransacao = temp[0];\r\n        (_a = this.modalDetalhes) === null || _a === void 0 ? void 0 : _a.show();\r\n    }\r\n}\r\nTransacoesComponent.ɵfac = function TransacoesComponent_Factory(t) { return new (t || TransacoesComponent)(i0.ɵɵdirectiveInject(i1.ToastService), i0.ɵɵdirectiveInject(i2.RequestService), i0.ɵɵdirectiveInject(i3.Formate)); };\r\nTransacoesComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: TransacoesComponent, selectors: [[\"app-transacoes\"]], viewQuery: function TransacoesComponent_Query(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵviewQuery(_c0, 5);\r\n        i0.ɵɵviewQuery(_c1, 5);\r\n        i0.ɵɵviewQuery(_c2, 5);\r\n    } if (rf & 2) {\r\n        let _t;\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalFiltro = _t.first);\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalDetalhes = _t.first);\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalCadastro = _t.first);\r\n    } }, decls: 2, vars: 0, template: function TransacoesComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"p\");\r\n        i0.ɵɵtext(1, \"transacoes works!\");\r\n        i0.ɵɵelementEnd();\r\n    } }, styles: [\".valor-vazio[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n}\\r\\n\\r\\n.actions[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    width: 100%;\\r\\n    justify-content: end;\\r\\n    align-items: center;\\r\\n\\r\\n}\\r\\n\\r\\nfieldset[_ngcontent-%COMP%] {\\r\\n    padding-top: 10px;\\r\\n}\\r\\n\\r\\n.card-title[_ngcontent-%COMP%] {\\r\\n    font-size: 18px;\\r\\n    font-weight: 500;\\r\\n}\\r\\n\\r\\n.tabset[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    width: 100%;\\r\\n    justify-content: space-evenly;\\r\\n    border-bottom: solid 1px var(--principal);\\r\\n}\\r\\n\\r\\n.tab[_ngcontent-%COMP%] {\\r\\n    text-align: center;\\r\\n    width: 100%;\\r\\n    border-top-left-radius: 5px;\\r\\n    height: 30px;\\r\\n    font-size: 16px;\\r\\n    border-top-right-radius: 5px;\\r\\n    color: var(--dark);\\r\\n    border: solid 1px 1px 0 1px var(--principal);\\r\\n    background-color: #ececec88;\\r\\n}\\r\\n\\r\\n.tab[_ngcontent-%COMP%]:hover {\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n.selected-tab[_ngcontent-%COMP%] {\\r\\n    background-color: var(--principal);\\r\\n    color: white;\\r\\n}\\r\\n\\r\\n.res[_ngcontent-%COMP%] {\\r\\n    font-weight: 600;\\r\\n}\\r\\n\\r\\n.form-row[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    justify-content: space-between;\\r\\n    flex-wrap: wrap;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYW5zYWNvZXMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGFBQWE7SUFDYixXQUFXO0lBQ1gsWUFBWTtJQUNaLHVCQUF1QjtJQUN2QixtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsV0FBVztJQUNYLG9CQUFvQjtJQUNwQixtQkFBbUI7O0FBRXZCOztBQUVBO0lBQ0ksaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0ksZUFBZTtJQUNmLGdCQUFnQjtBQUNwQjs7QUFFQTtJQUNJLGFBQWE7SUFDYixXQUFXO0lBQ1gsNkJBQTZCO0lBQzdCLHlDQUF5QztBQUM3Qzs7QUFFQTtJQUNJLGtCQUFrQjtJQUNsQixXQUFXO0lBQ1gsMkJBQTJCO0lBQzNCLFlBQVk7SUFDWixlQUFlO0lBQ2YsNEJBQTRCO0lBQzVCLGtCQUFrQjtJQUNsQiw0Q0FBNEM7SUFDNUMsMkJBQTJCO0FBQy9COztBQUVBO0lBQ0ksZUFBZTtBQUNuQjs7QUFFQTtJQUNJLGtDQUFrQztJQUNsQyxZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksZ0JBQWdCO0FBQ3BCOztBQUVBO0lBQ0ksYUFBYTtJQUNiLDhCQUE4QjtJQUM5QixlQUFlO0FBQ25CIiwiZmlsZSI6InRyYW5zYWNvZXMuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi52YWxvci12YXppbyB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbn1cclxuXHJcbi5hY3Rpb25zIHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGp1c3RpZnktY29udGVudDogZW5kO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuXHJcbn1cclxuXHJcbmZpZWxkc2V0IHtcclxuICAgIHBhZGRpbmctdG9wOiAxMHB4O1xyXG59XHJcblxyXG4uY2FyZC10aXRsZSB7XHJcbiAgICBmb250LXNpemU6IDE4cHg7XHJcbiAgICBmb250LXdlaWdodDogNTAwO1xyXG59XHJcblxyXG4udGFic2V0IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtZXZlbmx5O1xyXG4gICAgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4IHZhcigtLXByaW5jaXBhbCk7XHJcbn1cclxuXHJcbi50YWIge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiA1cHg7XHJcbiAgICBoZWlnaHQ6IDMwcHg7XHJcbiAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNXB4O1xyXG4gICAgY29sb3I6IHZhcigtLWRhcmspO1xyXG4gICAgYm9yZGVyOiBzb2xpZCAxcHggMXB4IDAgMXB4IHZhcigtLXByaW5jaXBhbCk7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWNlY2VjODg7XHJcbn1cclxuXHJcbi50YWI6aG92ZXIge1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG59XHJcblxyXG4uc2VsZWN0ZWQtdGFiIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXByaW5jaXBhbCk7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbn1cclxuXHJcbi5yZXMge1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxufVxyXG5cclxuLmZvcm0tcm93IHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICBmbGV4LXdyYXA6IHdyYXA7XHJcbn0iXX0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}